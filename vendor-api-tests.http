### Vendor API Tests
### Base URL - adjust if your server runs on a different port
@baseUrl = http://localhost:3001
@token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjMsImVtYWlsIjoiYUBhLmNvbSIsInJvbGUiOiJhZG1pbiIsImlhdCI6MTc1Nzc0MzAxNSwiZXhwIjoxNzU3NzQzOTE1fQ.83MajiJuFj7rVGI1-hCd8JWZvFAvAfig_4OLQcKrytE

### 1. Sign in to get JWT token (replace with actual admin credentials)
POST {{baseUrl}}/auth/signin
Content-Type: application/json

{
  "email": "admin@example.com",
  "password": "your_password_here"
}

### 2. Upload CSV file - Replace the file path with your actual CSV file
POST {{baseUrl}}/vendor/upload-csv
Authorization: Bearer {{token}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="vendors.csv"
Content-Type: text/csv

< /home/joshuadeleon/Downloads/haystack_fi_vendor_profiles_with_descriptions_FULL_expanded_v2.csv
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### 3. Get all vendors
GET {{baseUrl}}/vendor
Authorization: Bearer {{token}}

### 4. Get specific vendor by ID
GET {{baseUrl}}/vendor/1
Authorization: Bearer {{token}}

### 5. Alternative CSV upload using curl command (copy this to terminal)
# curl -X POST \
#   -H "Authorization: Bearer YOUR_JWT_TOKEN" \
#   -F "file=@/home/joshuadeleon/Downloads/haystack_fi_vendor_profiles_with_descriptions_FULL_expanded_v2.csv" \
#   http://localhost:3001/vendor/upload-csv

### 6. Test with a smaller sample CSV (create this file first)
# Create a file called sample-vendors.csv with this content:
# Company,Official Website,Summary,Detailed Description,Categories,Target Customers,Search Hints/Keywords,Compliance/Certifications,Integrations/Core Support,Digital Banking Partners,Notable Customers (Public),Pricing Notes,Source Used (URL),Confidence (0-1),Last Verified (UTC),Notes
# Test Company,https://test.com,Test summary,Test detailed description,Core Banking,Community banks,test keywords,,,,,,,https://test.com,0.9,2025-01-13,Test notes

POST {{baseUrl}}/vendor/upload-csv
Authorization: Bearer {{token}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="sample-vendors.csv"
Content-Type: text/csv

< ./sample-vendors.csv
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### 7. Test error handling - Upload non-CSV file
POST {{baseUrl}}/vendor/upload-csv
Authorization: Bearer {{token}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="test.txt"
Content-Type: text/plain

This is not a CSV file
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### 8. Test without authentication
POST {{baseUrl}}/vendor/upload-csv
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="test.csv"
Content-Type: text/csv

Company,Official Website
Test,https://test.com
------WebKitFormBoundary7MA4YWxkTrZu0gW--
